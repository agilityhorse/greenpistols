<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Green Pistols</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>GREEN PISTOLS</h1>
        <p class="tagline">One pair. One protest. Every month.</p>
      </header>

      <section class="product-image">
        <img src="images/socks.png" alt="Green Revenge Socks" />
      </section>

      <section class="price-breakdown">
        <pre>
‚Ç¨9.00 ‚Üí whole price included:

‚Ç¨2.88 ‚Üí donation to foundation
‚Ç¨2.88 ‚Üí production
‚Ç¨3.24 ‚Üí worldwide shipping
      </pre
        >
      </section>

      <section class="foundation">
        <p>
          I want start support
          <a href="https://snowleopard.org/"
            ><strong>Snow Leopard Trust</strong></a
          >
          to fight for white big cat in November.
        </p>
      </section>

      <section class="subscription">
        <p class="price">‚Ç¨9 / month subscription</p>
        <button class="cta" id="joinBtn">JOIN THE REBELLION</button>
      </section>

      <div id="emailModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2>We‚Äôre not ready yet</h2>
          <p>
            We‚Äôre not ready yet, but leave your email and we‚Äôll notify you when
            we start accepting orders.
          </p>
          <form id="emailForm">
            <input
              type="email"
              name="email"
              placeholder="Your email"
              required
            />
            <button type="submit" class="cta">Submit</button>
          </form>
          <p id="responseMsg" style="font-size: 12px; margin-top: 10px"></p>
        </div>
      </div>

      <section class="how-it-works">
        <p>
          1 pair of socks every month.<br />
          Worldwide delivery. Transparent donations.
        </p>
      </section>

      <footer>
        <p>
          <a href="https://www.instagram.com/agilityhorse">About Me</a>
          | <a href="www.instagram.com/agilityhorse">Instagram</a> |
          <a href="https://x.com/greenpistolscom">X Profile</a> |
          <a href="www.instagram.com/agilityhorse">Tik Tok</a>
        </p>
      </footer>
    </div>

    <script>
      const modal = document.getElementById("emailModal");
      const btn = document.getElementById("joinBtn");
      const span = document.querySelector(".close");
      const form = document.getElementById("emailForm");
      const responseMsg = document.getElementById("responseMsg");

      // üîπ Obs≈Çuga przycisku otwierajƒÖcego modal
      btn.onclick = () => (modal.style.display = "block");

      // üîπ Zamkniƒôcie po klikniƒôciu w X
      span.onclick = () => (modal.style.display = "none");

      // üîπ Zamkniƒôcie po klikniƒôciu poza okienko
      window.onclick = (event) => {
        if (event.target === modal) {
          modal.style.display = "none";
        }
      };

      // üîπ Obs≈Çuga formularza (wysy≈Çka do Google Sheets)
      form.addEventListener("submit", function (e) {
        e.preventDefault();
        const email = form.email.value;

        fetch(
          "https://script.google.com/macros/s/AKfycbz8PEjFIdkOtNoYqGQ3REZhCCfovIYqvaf5-sLozcIRLLm5KrjzCOmP_rZRU_ZZcE81/exec",
          {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: "email=" + encodeURIComponent(email),
          }
        )
          .then((res) => res.text())
          .then((text) => {
            if (text.includes("SUCCESS")) {
              responseMsg.textContent = "‚úÖ Thanks! Your email has been saved.";
              form.reset();
            } else {
              responseMsg.textContent = "‚ö†Ô∏è Something went wrong: " + text;
            }
          })
          .catch((err) => {
            responseMsg.textContent = "‚ùå Error: " + err;
          });
      });
    </script>
  </body>
</html>
